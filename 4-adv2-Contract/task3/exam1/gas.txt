root@LAPTOP-BA713FMQ:~/gas-optimization-demo# forge test --gas-report
[⠊] Compiling...
[⠘] Compiling 2 files with Solc 0.8.30
[⠃] Solc 0.8.30 finished in 739.39ms
Compiler run successful!

Ran 6 tests for test/MathOptTest.sol:MathOptTest
[PASS] test_v1_add() (gas: 76099)
[PASS] test_v1_subtract() (gas: 76116)
[PASS] test_v2_add() (gas: 56003)
[PASS] test_v2_subtract() (gas: 56021)
[PASS] test_v3_add() (gas: 10956)
[PASS] test_v3_subtract() (gas: 10974)
Suite result: ok. 6 passed; 0 failed; 0 skipped; finished in 1.84ms (1.24ms CPU time)

Ran 2 tests for test/Counter.t.sol:CounterTest
[PASS] testFuzz_SetNumber(uint256) (runs: 256, μ: 52061, ~: 52505)
[PASS] test_Increment() (gas: 51847)
Suite result: ok. 2 passed; 0 failed; 0 skipped; finished in 9.00ms (8.12ms CPU time)

╭----------------------------------+-----------------+-------+--------+-------+---------╮
| src/Counter.sol:Counter Contract |                 |       |        |       |         |
+=======================================================================================+
| Deployment Cost                  | Deployment Size |       |        |       |         |
|----------------------------------+-----------------+-------+--------+-------+---------|
| 156813                           | 509             |       |        |       |         |
|----------------------------------+-----------------+-------+--------+-------+---------|
|                                  |                 |       |        |       |         |
|----------------------------------+-----------------+-------+--------+-------+---------|
| Function Name                    | Min             | Avg   | Median | Max   | # Calls |
|----------------------------------+-----------------+-------+--------+-------+---------|
| increment                        | 43482           | 43482 | 43482  | 43482 | 1       |
|----------------------------------+-----------------+-------+--------+-------+---------|
| number                           | 2424            | 2424  | 2424   | 2424  | 257     |
|----------------------------------+-----------------+-------+--------+-------+---------|
| setNumber                        | 23784           | 43113 | 43708  | 44068 | 258     |
╰----------------------------------+-----------------+-------+--------+-------+---------╯

╭--------------------------------------+-----------------+-------+--------+-------+---------╮
| src/MathOptV1.sol:MathOptV1 Contract |                 |       |        |       |         |
+===========================================================================================+
| Deployment Cost                      | Deployment Size |       |        |       |         |
|--------------------------------------+-----------------+-------+--------+-------+---------|
| 192831                               | 675             |       |        |       |         |
|--------------------------------------+-----------------+-------+--------+-------+---------|
|                                      |                 |       |        |       |         |
|--------------------------------------+-----------------+-------+--------+-------+---------|
| Function Name                        | Min             | Avg   | Median | Max   | # Calls |
|--------------------------------------+-----------------+-------+--------+-------+---------|
| add                                  | 24557           | 34507 | 34507  | 44457 | 2       |
|--------------------------------------+-----------------+-------+--------+-------+---------|
| subtract                             | 24576           | 34526 | 34526  | 44476 | 2       |
╰--------------------------------------+-----------------+-------+--------+-------+---------╯

╭--------------------------------------+-----------------+-------+--------+-------+---------╮
| src/MathOptV2.sol:MathOptV2 Contract |                 |       |        |       |         |
+===========================================================================================+
| Deployment Cost                      | Deployment Size |       |        |       |         |
|--------------------------------------+-----------------+-------+--------+-------+---------|
| 251663                               | 751             |       |        |       |         |
|--------------------------------------+-----------------+-------+--------+-------+---------|
|                                      |                 |       |        |       |         |
|--------------------------------------+-----------------+-------+--------+-------+---------|
| Function Name                        | Min             | Avg   | Median | Max   | # Calls |
|--------------------------------------+-----------------+-------+--------+-------+---------|
| add                                  | 24488           | 24488 | 24488  | 24488 | 2       |
|--------------------------------------+-----------------+-------+--------+-------+---------|
| subtract                             | 24508           | 24508 | 24508  | 24508 | 2       |
╰--------------------------------------+-----------------+-------+--------+-------+---------╯

╭--------------------------------------+-----------------+-----+--------+-----+---------╮
| src/MathOptV3.sol:MathOptV3 Contract |                 |     |        |     |         |
+=======================================================================================+
| Deployment Cost                      | Deployment Size |     |        |     |         |
|--------------------------------------+-----------------+-----+--------+-----+---------|
| 180167                               | 617             |     |        |     |         |
|--------------------------------------+-----------------+-----+--------+-----+---------|
|                                      |                 |     |        |     |         |
|--------------------------------------+-----------------+-----+--------+-----+---------|
| Function Name                        | Min             | Avg | Median | Max | # Calls |
|--------------------------------------+-----------------+-----+--------+-----+---------|
| add                                  | 978             | 978 | 978    | 978 | 2       |
|--------------------------------------+-----------------+-----+--------+-----+---------|
| subtract                             | 997             | 997 | 997    | 997 | 2       |
╰--------------------------------------+-----------------+-----+--------+-----+---------╯


Ran 2 test suites in 23.66ms (10.84ms CPU time): 8 tests passed, 0 failed, 0 skipped (8 total tests)