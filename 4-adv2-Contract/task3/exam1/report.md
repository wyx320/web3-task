## 优化效果分析报告

### 1. 原始版本 V1

​	每次运算都执行一次 **`SSTORE`**
​	EVM 中 **`SSTORE 初次写入`** 成本极高（约 10k gas），再次改值也要花费较多 gas
​	导致每两次基础加法/减法 Gas 消耗约 34.5k

### 2. 优化版本 V2

​	仅当结果不同才写入存储 → 避免重复写入
​	测试中 **`add(1,2)`** 每两次写约 24.5k gas，比 V1 节省 **`约 29%`** 
​	如果多次调用且结果相同，Gas 消耗会小幅下降

### 3. 优化版本V3

​	去掉状态变量，改为 **`pure`** → 不再访问存储
​	仅设计算术运算（EVM内存级别操作）
​	Gas 消耗极低（< 1k ），比 V1 节省 > 97%
​	适合无状态逻辑，但需要外部维护状态

## 总结

**最大优化点：** 

减少或移除 **`SSTORE`** 操作

**适用策略：**

1. 检查写入值是否变更 → 避免重复存储写
2. 能不用状态变量就不用（改成 **`pure`** / **`view`**）
3. 若必须用存储 → 尽量批量计算后一次性写入
